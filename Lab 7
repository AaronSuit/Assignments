import numpy as np
import urllib.request as rq
import json
import arcpy
turtleID = 244
url = 'http://geo.conserveturtles.org/Tracking/GetTurtleLocationsByIdAsJson?id={}'.format(turtleID)
f = rq.urlopen(url)

turtledata = json.load(f)
print(turtledata[0])


arcpy.env.overwriteOutput = True

out_path = r"C:\Users\w935558\Desktop\TurtleData"
out_name = "TurtleTracks.shp"
fc = r"{}/{}".format(out_path,out_name)
spatial_reference = arcpy.SpatialReference(4326)
arcpy.CreateFeatureclass_management(out_path, out_name, "Polyline", "", "", "", spatial_reference)

cursor = arcpy.da.InsertCursor(fc, ["SHAPE@"])
pointsList = []
for turtleLocation in turtledata:
    
    x = turtleLocation["Lng"]
    y = turtleLocation["Lat"]
    pointsList.append(arcpy.Point(x,y))
                      
array = arcpy.Array(pointsList)
                      
myshape = arcpy.Polyline(array, spatial_reference)

cursor.insertRow([myshape])

del cursor
